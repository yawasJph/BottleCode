<!DOCTYPE html>
<html lang="en">

<head>
	<title>BottleCode</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

	<link
		href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,700;0,800;1,200;1,300;1,400;1,500;1,700&display=swap"
		rel="stylesheet">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="../css/animate.css">

	<link rel="stylesheet" href="../css/owl.carousel.min.css">
	<link rel="stylesheet" href="../css/owl.theme.default.min.css">
	<link rel="stylesheet" href="../css/magnific-popup.css">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

	<link rel="stylesheet" href="../css/flaticon.css">

	<link rel="stylesheet" href="../css/style.css">

</head>
<style>
	@media (max-width: 1000.98px) {
		#userIcon {
			display: none !important;
		}
	}
</style>

<body>

	<div class="wrap">
		<div class="container">
			<!-- <div class="row">
				<div class="col-md-6 d-flex align-items-center">
					<p class="mb-0 phone pl-md-2">

					</p>
				</div>
				<div class="col-md-6 d-flex justify-content-md-end">
					<div class="social-media mr-4">
						<p class="mb-0 d-flex">

						</p>
					</div>
					<div class="reg">

					</div>
				</div>
			</div> -->
		</div>
	</div>

	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
		<div class="container">
			<a class="navbar-brand" href="index.html">Bottle <span>Code</span></a>
			<div class="order-lg-last btn-group gap-4">
				<a href="javascript:void(0)" class="position-relative" data-bs-toggle="offcanvas"
					data-bs-target="#offcanvasCart" id="btn-cart">
					<span class="flaticon-shopping-bag fs-4"></span>
					<span id="cart-count"
						class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger ">
						0
					</span>
				</a>
			</div>

			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
				aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> Menu
			</button>

			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active"><a href="index.html" class="nav-link">Inicio</a></li>
					<li class="nav-item"><a href="about.html" class="nav-link">Nosotros</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">Categorias</a>
						<div class="dropdown-menu" aria-labelledby="dropdown04" id="navbar-category-dropdown">

						</div>
					</li>
					<li class="nav-item"><a href="contact.html" class="nav-link">Contacto</a></li>
				</ul>
				<!-- <ul class="navbar-nav ml-auto" id="userIcon">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false"><i class="bi bi-person fs-4"></i></a>
						<div class="dropdown-menu" aria-labelledby="dropdown05">
							<a class="dropdown-item" href="#">Iniciar Sesion</a>
							<a class="dropdown-item" href="#">Registrarse</a>
						</div>
					</li>
				</ul> -->
			</div>
		</div>
	</nav>
	<!-- END nav -->

	<div class="hero-wrap" style="background-image: url('../images/bg_2.jpg');" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row no-gutters slider-text align-items-center justify-content-center">
				<div class="col-md-8 ftco-animate d-flex align-items-end">
					<div class="text w-100 text-center">
						<h1 class="mb-4">Buena <span>Bebida</span> para Buenos <span>Momentos</span>.</h1>
						<p><a href="product.html" class="btn btn-primary py-2 px-4">Comprar Ahora</a> <a href="about.html"
								class="btn btn-white btn-outline-white py-2 px-4">Leer Mas</a></p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<section class="ftco-intro">
		<div class="container">
			<div class="row no-gutters">
				<div class="col-md-4 d-flex">
					<div class="intro d-lg-flex w-100 ftco-animate">
						<div class="icon">
							<span class="flaticon-support"></span>
						</div>
						<div class="text">
							<h2>Soporte en línea 24/7</h2>
							<p>Un pequeño río llamado Duden fluye junto a su lugar y le proporciona la necesaria
								regelialia.</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 d-flex">
					<div class="intro color-1 d-lg-flex w-100 ftco-animate">
						<div class="icon">
							<span class="flaticon-cashback"></span>
						</div>
						<div class="text">
							<h2>Garantía de Devolución de Dinero</h2>
							<p>Un pequeño río llamado Duden fluye junto a su lugar y le proporciona la necesaria
								regelialia.</p>
						</div>
					</div>
				</div>
				<div class="col-md-4 d-flex">
					<div class="intro color-2 d-lg-flex w-100 ftco-animate">
						<div class="icon">
							<span class="flaticon-free-delivery"></span>
						</div>
						<div class="text">
							<h2>Envío y devolución gratis</h2>
							<p>Un pequeño río llamado Duden fluye junto a su lugar y le proporciona la necesaria
								regelialia.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="ftco-section ftco-no-pb">
		<div class="container">
			<div class="row">
				<div class="col-md-6 img img-3 d-flex justify-content-center align-items-center"
					style="background-image: url(../images/about.jpg);">
				</div>
				<div class="col-md-6 wrap-about pl-md-5 ftco-animate py-5">
					<div class="heading-section">
						<span class="subheading">Desde 1905</span>
						<h2 class="mb-4">El deseo encuentra un nuevo sabor</h2>

						<p>Un pequeño río llamado Duden fluye junto a su lugar y lo abastece con la necesaria regalía.
							Es un país paradisíaco, en el que partes asadas de oraciones vuelan hacia tu boca.</p>
						<p>En su camino se encontró con una copia. La copia advirtió al Pequeño Texto Ciego que de donde
							venía habría sido reescrito mil veces y todo lo que quedaba de su origen sería la palabra
							"y" y el Pequeño Texto Ciego debería dar la vuelta y regresar a su propio país, seguro.</p>
						<p class="year">
							<strong class="number" data-number="115">0</strong>
							<span>Años de experiencia en el negocio</span>
						</p>
					</div>

				</div>
			</div>
		</div>
	</section>

	<section class="ftco-section ftco-no-pb">
		<div class="container" id="row-categories">
			<!-- Empty Message || categories  -->
			<div class="owl-carousel owl-theme" id="categories-slider">

				<!-- Agrega más items aquí si tienes más categorías -->
			</div>
		</div>
	</section>

	<section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center pb-5">
				<div class="col-md-7 heading-section text-center ftco-animate">
					<span class="subheading">Nuestras Deliciosas Ofertas</span>
					<h2>Pruebalos Ya!</h2>
				</div>
			</div>
			<div class="row" id="initProducts">

				<!-- Empty message || render products-->

			</div>
			<div class="row justify-content-center">
				<div class="col-md-4">
					<a href="product.html" class="btn btn-primary d-block">Ver todos los productos <span
							class="fa fa-long-arrow-right"></span></a>
				</div>
			</div>
		</div>
	</section>


	<section class="ftco-section testimony-section img mb-5" style="background-image: url(../images/bg_4.jpg);">
		<div class="overlay"></div>
		<div class="container">
			<div class="row justify-content-center mb-5">
				<div class="col-md-7 text-center heading-section heading-section-white ftco-animate">
					<span class="subheading">Testimonios</span>
					<h2 class="mb-3">Clientes Felices</h2>
				</div>
			</div>
			<div class="row ftco-animate">
				<div class="col-md-12">
					<div class="carousel-testimony owl-carousel ftco-owl">
						<div class="item">
							<div class="testimony-wrap py-4">
								<div class="icon d-flex align-items-center justify-content-center"><span
										class="fa fa-quote-left"></div>
								<div class="text">
									<p class="mb-4">Muy, muy lejos, detrás de las montañas de palabras, lejos de los
										países Vokalia y Consonantia, viven los textos ciegos.</p>
									<div class="d-flex align-items-center">
										<div class="user-img" style="background-image: url(../images/person_1.jpg)">
										</div>
										<div class="pl-3">
											<p class="name">Roger Scott</p>
											<span class="position">Marketing Manager</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="testimony-wrap py-4">
								<div class="icon d-flex align-items-center justify-content-center"><span
										class="fa fa-quote-left"></div>
								<div class="text">
									<p class="mb-4">Muy, muy lejos, detrás de las montañas de palabras, lejos de los
										países Vokalia y Consonantia, viven los textos ciegos.</p>
									<div class="d-flex align-items-center">
										<div class="user-img" style="background-image: url(../images/person_2.jpg)">
										</div>
										<div class="pl-3">
											<p class="name">Roger Scott</p>
											<span class="position">Marketing Manager</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="testimony-wrap py-4">
								<div class="icon d-flex align-items-center justify-content-center"><span
										class="fa fa-quote-left"></div>
								<div class="text">
									<p class="mb-4">Muy, muy lejos, detrás de las montañas de palabras, lejos de los
										países Vokalia y Consonantia, viven los textos ciegos.</p>
									<div class="d-flex align-items-center">
										<div class="user-img" style="background-image: url(../images/person_3.jpg)">
										</div>
										<div class="pl-3">
											<p class="name">Roger Scott</p>
											<span class="position">Marketing Manager</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="testimony-wrap py-4">
								<div class="icon d-flex align-items-center justify-content-center"><span
										class="fa fa-quote-left"></div>
								<div class="text">
									<p class="mb-4">Muy, muy lejos, detrás de las montañas de palabras, lejos de los
										países Vokalia y Consonantia, viven los textos ciegos.</p>
									<div class="d-flex align-items-center">
										<div class="user-img" style="background-image: url(../images/person_1.jpg)">
										</div>
										<div class="pl-3">
											<p class="name">Roger Scott</p>
											<span class="position">Marketing Manager</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="testimony-wrap py-4">
								<div class="icon d-flex align-items-center justify-content-center"><span
										class="fa fa-quote-left"></div>
								<div class="text">
									<p class="mb-4">Muy, muy lejos, detrás de las montañas de palabras, lejos de los
										países Vokalia y Consonantia, viven los textos ciegos.</p>
									<div class="d-flex align-items-center">
										<div class="user-img" style="background-image: url(../images/person_2.jpg)">
										</div>
										<div class="pl-3">
											<p class="name">Roger Scott</p>
											<span class="position">Marketing Manager</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>




	<footer class="ftco-footer">
		<div class="container">
			<div class="row">
				<div class="col-sm-12 col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2 logo"><a href="#">Bottle <span>Code</span></a></h2>
						<p>Lejos, muy lejos, detrás de las montañas de palabras, lejos de los países.</p>
						<ul class="ftco-footer-social list-unstyled mt-2">
							<li class="ftco-animate"><a href="#"><span class="fa fa-twitter"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="fa fa-facebook"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="fa fa-instagram"></span></a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-12 col-md">
					<div class="ftco-footer-widget mb-4 ml-md-4">
						<h2 class="ftco-heading-2">Mis Cuentas</h2>
						<ul class="list-unstyled">
							<li><a href="./admin/index.html" target="_blank"><span class="fa fa-chevron-right mr-2"></span>Mi Cuenta</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Registrar</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Iniciar sesión</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Mi pedido</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-12 col-md">
					<div class="ftco-footer-widget mb-4 ml-md-4">
						<h2 class="ftco-heading-2">Informacion</h2>
						<ul class="list-unstyled">
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Nosotros</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Categorias</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Contacto</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Términos y Condiciones</a>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-sm-12 col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Enlace rápido</h2>
						<ul class="list-unstyled">
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Nuevo Usuario</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Centro de Ayuda</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Informar spam</a></li>
							<li><a href="#"><span class="fa fa-chevron-right mr-2"></span>Preguntas frecuentes</a></li>
						</ul>
					</div>
				</div>
				<div class="col-sm-12 col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">¿Tienes preguntas?</h2>
						<div class="block-23 mb-3">
							<ul>
								<li><span class="icon fa fa-map marker"></span><span class="text">203 Calle Falsa, Vista
										de la Montaña, San Francisco, California, EE. UU.</span></li>
								<li><a href="#"><span class="icon fa fa-phone"></span><span class="text">+2 392 3929
											210</span></a></li>
								<li><a href="#"><span class="icon fa fa-paper-plane pr-4"></span><span
											class="text">BottleCode@gmail.com</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
				stroke="#F96D00" />
		</svg>
	</div>


	<div id="cartModal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<div class="modal-body">
				<div class="modal-left">
					<img id="modal-image" src="" alt="Producto" />
				</div>
				<div class="modal-right">
					<h3 id="modal-name">Nombre del producto</h3>
					<label for="modal-quantity">Cantidad:</label>
					<input type="number" id="modal-quantity" min="1" value="1" /><br>
					<p>Precio: $<span id="modal-price">0.00</span></p>
					<button id="add-to-cart-btn">Agregar al carrito</button>
				</div>
			</div>
		</div>
	</div>

	<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
		<div class="offcanvas-header">
			<div>
				<h5 class="offcanvas-title" id="offcanvasCartLabel">
					<i class="bi bi-cart3 me-2"></i>Carrito de Compras
				</h5>
				<p class="mb-0 small">Tus productos seleccionados</p>
			</div>
			<button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"
				aria-label="Cerrar"></button>
		</div>
		<div class="offcanvas-body d-flex flex-column">
			<div id="cart-body" class="mb-3 flex-grow-1">
				<!-- Los elementos del carrito se insertarán aquí -->
			</div>

			<div class="summary-card mt-auto">
				<div class="d-flex justify-content-between align-items-center mb-3 border-top pt-2">
					<strong class="fs-5">Total:</strong>
					<span id="cart-total" class="fs-5 fw-bold " style="color: brown;">S/ 0.00</span>
				</div>
				<div class="d-grid gap-2">
					<a class="btn btn-view-cart btn-outline-secondary" href="cart.html">
						<i class="bi bi-cart me-1"></i> Ver Carrito Completo
					</a>
					<button id="btn-checkout" class="btn btn-checkout text-white">
						<i class="bi bi-credit-card me-1"></i> Proceder a Comprar
					</button>
				</div>
			</div>
		</div>
	</div>


	<script src="../js/jquery.min.js"></script>
	<script src="../js/jquery-migrate-3.0.1.min.js"></script>
	<script src="../js/popper.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/jquery.easing.1.3.js"></script>
	<script src="../js/jquery.waypoints.min.js"></script>
	<script src="../js/jquery.stellar.min.js"></script>
	<script src="../js/owl.carousel.min.js"></script>
	<script src="../js/jquery.magnific-popup.min.js"></script>
	<script src="../js/jquery.animateNumber.min.js"></script>
	<script src="../js/scrollax.min.js"></script>
	<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="js/google-map.js"></script>-->
	<script src="../js/main.js"></script>


	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		document.getElementById('btn-checkout').addEventListener('click', function (e) {
			e.preventDefault();

			// Verifica si el carrito está vacío
			if (cartItems.length === 0) {
				Swal.fire({
					title: 'Carrito vacío',
					text: 'Debes añadir al menos un producto al carrito para proceder al pago.',
					icon: 'warning',
					confirmButtonText: 'Entendido'
				});
				return;
			}

			// Si hay productos, puedes proceder con la lógica de compra
			// Por ejemplo: redirigir, mostrar otro modal, etc.
			Swal.fire({
				title: 'Todo listo',
				text: 'Redirigiendo al proceso de pago...',
				icon: 'success',
				timer: 1500,
				showConfirmButton: false
			});

			// Simulación de redirección (cámbiala por lo que necesites)
			setTimeout(() => {
				window.location.href = 'checkout.html';
			}, 1600);
		});
	</script>

	<script>
		let products = JSON.parse(localStorage.getItem('products')) || []
		console.log(products)
		let categories = JSON.parse(localStorage.getItem('categories')) || []
		const divContainerCategories = document.getElementById('row-categories')
		const divSlaiderCategories = document.getElementById('categories-slider')

		const divInitProducts = document.getElementById('initProducts')

		const categoriesActives = categories.filter(category => category._status === 'activo');

		//filter product if contains every category active {simulate one to many relation; if delete category , every product with that category delete ifself}
		const categoriesNameActive = categoriesActives.map(c => c._name)
		const categoriesNameActiveLowerCase = categoriesNameActive.map(c => c.toLowerCase())
		const productsMain = products.filter(p =>
			categoriesNameActiveLowerCase.includes(p._category.toLowerCase()) &&
			p._status === 'activo')
			.slice(0, 8)
		//implice - admins pages and product pages , and some conflicts with the cart // no time mayday meidei //  no incluir solo mirar u.u

		const productsActiveAndMax8 = products
			.filter(prodcut => prodcut._status === 'activo')
			.slice(0, 8);

		//init funtions rage	
		document.addEventListener("DOMContentLoaded", function () {
			renderCategories()
			renderInitProducts()
			renderCart()
			dropdownCategory()

		})

		// cart -> db?
		let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

		//add to cart
		document.addEventListener('click', function (e) {
			const addBtn = e.target.closest('.add-to-cart');
			if (!addBtn) return;

			const productEl = addBtn.closest('.product');
			const id = productEl.dataset.id; //  data-id every .product
			const name = productEl.querySelector('h2').textContent;
			const price = productEl.querySelector('p .price-real').textContent;
			const image = productEl.querySelector('.img').style.backgroundImage.replace('url("', '').replace('")', '');

			const existingItem = cartItems.find(item => item.id === id);

			if (existingItem) {
				existingItem.quantity += 1;
			} else {
				//let cartItem = new Cart(id,name,price,image)
				cartItems.push({ id, name, price, image, quantity: 1 });
				//cartItems.push(cartItem)
			}

			renderCart();
			saveCartToLocalStorage();
		});

		function dropdownCategory() {
			const dropdownContainer = document.getElementById('navbar-category-dropdown');

			dropdownContainer.innerHTML = '';

			if (categoriesActives.length === 0) {
				// empty message
				const noItem = document.createElement('div');
				noItem.className = 'dropdown-item text-muted d-flex align-items-center gap-2';
				noItem.style.pointerEvents = 'none';
				noItem.innerHTML = `<i class="bi bi-info-circle"></i> <span>Sin categorías disponibles</span>`;
				dropdownContainer.appendChild(noItem);
				return;
			}

			//Option "Todos"
			const allItem = document.createElement('a');
			allItem.className = 'dropdown-item category-link';
			allItem.href = `product.html`;
			allItem.textContent = 'Todos';
			dropdownContainer.appendChild(allItem);

			// add active categories
			categoriesActives.forEach(category => {
				const link = document.createElement('a');
				link.className = 'dropdown-item';
				link.href = `product.html?category=${encodeURIComponent(category._name.toLowerCase())}`;
				link.textContent = category._name;
				dropdownContainer.appendChild(link);
			});
		}

		//render cart
		function renderCart() {
			const cartBody = document.getElementById('cart-body');
			if (cartItems.length === 0) {
				cartBody.innerHTML = `
    	<div class="empty-cart">
        <i class="bi bi-cart-x"></i>
        <h5 class="mb-2">Tu carrito está vacío</h5>
        <p class="text-muted">Añade productos para comenzar a comprar</p>
        <a href="product.html" class="btn btn-primary mt-2">
            Continuar Comprando
        </a>
   		</div>
		`;
				document.getElementById('cart-total').textContent = 'S/ 0.00';
				updateCartCount();
				return;
			}
			cartBody.innerHTML = cartItems.map(item => `
	 			<div class="cart-item">
                    <div class="d-flex">
                        <img src="${item.image}" alt="${item.name}" class="cart-img me-3">
                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between">
                                <h6 class="mb-1">${item.name}</h6>
                                <button class="btn btn-sm btn-link text-danger btn-delete p-0" data-id="${item.id}">
                                    Eliminar
                                </button>
                            </div>
                            <p class="mb-1">S/ ${item.price}</p>
                            
                            <div class="d-flex align-items-center mt-2">
                                <div class="input-group input-group-sm" style="max-width: 130px;">
                                    <button class="btn btn-outline-secondary quantity-btn btn-decrease" data-id="${item.id}">
                                        -
                                    </button>
                                    <input type="number" min="1" class="form-control text-center quantity-input input-qty" 
                                           data-id="${item.id}" value="${item.quantity}">
                                    <button class="btn btn-outline-secondary quantity-btn btn-increase" data-id="${item.id}">
                                        +
                                    </button>
                                </div>
                                <div class="ms-auto fw-bold">
                                    S/ ${(item.price * item.quantity).toFixed(2)}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
 				 `).join('');
			updateCartCount();
			updateCartTotal();
		}


		//persisten
		function saveCartToLocalStorage() {
			localStorage.setItem('cartItems', JSON.stringify(cartItems));
		}

		//delete cart item
		document.addEventListener('click', function (e) {
			if (e.target.classList.contains('btn-delete')) {
				const id = e.target.dataset.id;

				Swal.fire({
					title: '¿Eliminar producto?',
					text: "Esta acción no se puede deshacer",
					icon: 'warning',
					showCancelButton: true,
					confirmButtonText: 'Sí, eliminar',
					cancelButtonText: 'Cancelar',
					confirmButtonColor: '#d33',
					cancelButtonColor: '#3085d6'
				}).then((result) => {
					if (result.isConfirmed) {
						cartItems = cartItems.filter(item => item.id !== id);
						renderCart();
						saveCartToLocalStorage();

						Swal.fire({
							icon: 'success',
							title: 'Eliminado',
							text: 'El producto fue eliminado del carrito',
							timer: 1500,
							showConfirmButton: false
						});

					}
				});
			}
		});

		//innert cart up  || decrese button 
		document.addEventListener('click', function (e) {
			if (e.target.classList.contains('btn-increase') || e.target.classList.contains('btn-decrease')) {
				const id = e.target.dataset.id;
				const item = cartItems.find(prod => prod.id === id);
				if (!item) return;

				if (e.target.classList.contains('btn-increase')) {
					item.quantity++;
				} else if (item.quantity > 1) {
					item.quantity--;
				}

				renderCart();
				saveCartToLocalStorage();
			}
		});

		//input cart up || decrese
		document.addEventListener('input', function (e) {
			if (e.target.classList.contains('input-qty')) {
				const id = e.target.dataset.id;
				const newQty = parseInt(e.target.value);
				const item = cartItems.find(prod => prod.id === id);

				if (item && newQty > 0) {
					item.quantity = newQty;
					renderCart();
					saveCartToLocalStorage();
				}
			}
		});

		//update cart count
		function updateCartCount() {
			const total = cartItems.reduce((sum, item) => sum + item.quantity, 0);
			document.getElementById('cart-count').textContent = total;
		}

		//update cart total
		function updateCartTotal() {
			const total = cartItems.reduce((sum, item) => {
				const itemPrice = parseFloat(item.price); //.replace('S/ ', '')
				return sum + itemPrice * item.quantity;
			}, 0);
			document.getElementById('cart-total').textContent = `S/ ${total.toFixed(2)}`;
			localStorage.setItem('cartTotal', total.toFixed(2));	
		}

		//render initials products
		const renderInitProducts = () => {
			if (products.length === 0) {
				divInitProducts.classList.add('justify-content-center')
				divInitProducts.id = 'recent-product'
				divInitProducts.innerHTML = `
				<div class="col-md-6 d-flex justify-content-center align-items-center">
					<div class="w-100 text-center" style="font-size:2rem; font-weight:600;">
						No hay Productos Agregados
					</div>
				</div>
				`
			} else {
				productsActiveAndMax8.forEach((product, index) => {
					divInitProducts.innerHTML += `
					<div class="col-md-3 d-flex">
						<div class="product ftco-animate-cate" data-id="${product._name}">
							<div class="img d-flex align-items-center justify-content-center"
								style="background-image: url('${product._image}');">
								<div class="desc">
									<p class="meta-prod d-flex">
										<a href="javascript:void(0)"
   										class="add-to-cart d-flex align-items-center justify-content-center"
   										data-bs-toggle="offcanvas"
   										data-bs-target="#offcanvasCart" title="Agregar al Carrito" >
   										<span class="flaticon-shopping-bag"></span>
										</a>
										<!-- user favorites products -->
										<a href="#" class="d-flex align-items-center justify-content-center" title="Ver Producto">
										<span class="flaticon-visibility view-product"></span>
										</a>
									</p>
								</div>
							</div>
							<div class="text text-center">
								<span class="sale">Sale</span>
								<span class="category">${product._category}</span>
								<h2>${product._name}</h2>
								<p class="mb-0"><span class="price price-sale">S/ 69.00</span> S/<span
									class="price-real">${product._price}</span>
								</p>
							</div>
						</div>
					</div>
					`
				})

			}
		}

		//  user favorites products , needs user auth module , no time 
		function noTime() {
			const a = document.createElement('a')
			a.className = "d-flex align-items-center justify-content-center"
			const span = document.createElement('span')
			span.className = "flaticon-heart"
			a.append(span)
		}
		// nai te nai yo u.u 

		//render categories
		const renderCategories = () => {
			if (categories.length === 0) {
				divContainerCategories.innerHTML = `
        <div class="row justify-content-center">
            <div class="col-md-6 d-flex justify-content-center align-items-center">
                <div class="w-100 text-center" style="font-size:2rem; font-weight:600;">
                    No hay Categorias Agregadas
                </div>
            </div>
        </div>
    `;
			} else {
				let itemsHtml = '';
				categoriesActives.forEach(category => {
					itemsHtml += `
            <div class="item">
                <a href="product.html?category=${category._name.toLowerCase()}" class="sort w-100 text-center ftco-animate-cate">
                    <div class="img" style="background-image: url(${category._image});"></div>
                    <h3>${category._name}</h3>
                </a>
            </div>
        `;
				});
				divContainerCategories.innerHTML = `
        <div class="owl-carousel owl-theme" id="categories-slider">
            ${itemsHtml}
        </div>
    `;
				// init owlcarrusel instance
				$("#categories-slider").owlCarousel({
					loop: true,
					margin: 20,
					nav: true,
					navText: [
						'<span class="fa fa-chevron-left"></span>',
						'<span class="fa fa-chevron-right"></span>'
					],
					dots: false,
					autoplay: true,
					autoplayTimeout: 2500,
					autoplayHoverPause: true,
					responsive: {
						0: { items: 2 },
						600: { items: 3 },
						1000: { items: 6 }
					}
				});
			}
		}

		//persist id_product to view in the single product page
		document.addEventListener('click', function (e) {
			const viewProduct = e.target.closest('.view-product');
			if (!viewProduct) return;

			const productEl = viewProduct.closest('.product');
			const viewId = productEl.dataset.id;

			localStorage.setItem('viewId', viewId)
			window.location.href = 'product-single.html';
		});

		
	</script>


</body>

</html>